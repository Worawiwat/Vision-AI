<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width,initial-scale=1" name="viewport">
  <meta content="description" name="description">
  <meta name="google" content="notranslate" />
  <meta name="msapplication-tap-highlight" content="no">
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-icon-180x180.png">
  <link href="./assets/favicon.ico" rel="icon">

  <title>ImageClassification</title></title>

  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <link href="./main.3f6952e4.css" rel="stylesheet">
  <style>
    /* Styling for containers and frames */
    #webcam-container, #upload-container {
      text-align: center;
      margin-top: 20px;
    }

    .frame {
      width: 400px;
      height: 300px;
      border: 2px solid #333;
      display: inline-block;
      position: relative;
      overflow: hidden;
      margin-bottom: 10px;
    }

    #webcam {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #upload-preview {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .center-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    button {
      margin: 10px;
    }

    #image-upload {
      margin-top: 10px;
    }
  </style>
</head>

<body class="">
  <div id="site-border-left"></div>
  <div id="site-border-right"></div>
  <div id="site-border-top"></div>
  <div id="site-border-bottom"></div>

  <header>
    <nav class="navbar  navbar-fixed-top navbar-default">
      <div class="container">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar-collapse">
          <ul class="nav navbar-nav ">
            <li><a href="./index.html" title="">Home</a></li>
            <li><a href="./ImageClassification.html" title="">ImageClassification</a></li>
            <li><a href="./ObjectDetection.html" title="">ObjectDetection</a></li>
            <li><a href="./ImageSegmentation.html" title="">ImageSegmentation</a></li>
            <li><a href="./HandLandmarkDetection.html" title="">HandLandmarkDetection</a></li>
            <li><a href="./FaceDetection.html" title="">FaceDetection</a></li>
            <li><a href="./aboutus.html" title="">About us</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <div class="section-container">
    <div class="container center-container">
          <div class="row">
            <div class="col-sm-8 col-sm-offset-2 section-container-spacer">
              <div class="text-center">
                <h1 class="h2">ImageClassification</h1>
                <p>
                  Image Classification คือกระบวนการใช้ปัญญาประดิษฐ์ (AI) หรือการเรียนรู้ของเครื่อง (Machine Learning) ในการจำแนกวัตถุหรือหมวดหมู่ของภาพ โดยโมเดลจะวิเคราะห์คุณสมบัติของภาพ เช่น สี รูปร่าง หรือโครงสร้าง จากนั้นจะเปรียบเทียบกับข้อมูลที่ได้รับการฝึกฝนมา เพื่อคาดการณ์ว่าภาพนั้นเป็นอะไร พร้อมให้ค่าความมั่นใจ การจำแนกภาพถูกนำไปใช้ในหลากหลายอุตสาหกรรม เช่น การวินิจฉัยโรคจากภาพทางการแพทย์ การค้นหาสินค้าจากภาพในอีคอมเมิร์ซ และการตรวจจับวัตถุในระบบความปลอดภัย เป็นเทคโนโลยีที่ช่วยให้การวิเคราะห์ภาพเป็นไปอย่างรวดเร็วและแม่นยำ    </div>
  </div>

  <div class="section-container">
    <div class="container center-container">
      <!-- Webcam Container -->
      <div id="webcam-container">
        <h3>Real-time Image Classification</h3>
        <div class="frame">
          <video id="webcam" autoplay></video>
        </div>
        <p id="webcam-predictions">Prediction will appear here...</p>
        <button id="webcamButton">ENABLE PREDICTIONS</button>
      </div>

      <!-- Image Upload Container -->
      <div id="upload-container">
        <h3>Upload an Image for Classification</h3>
        <div class="frame">
          <img id="upload-preview" alt="Uploaded Image Preview">
        </div>
        <input type="file" id="image-upload" accept="image/*">
        <p id="upload-predictions">Prediction will appear here...</p>
      </div>
    </div>
  </div>

  <script type="module">
    import {
      ImageClassifier,
      FilesetResolver
    } from "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2";

    let imageClassifier;
    let runningMode = "IMAGE";  // Set initial mode to IMAGE
    let webcamRunning = false;
    let video = document.getElementById('webcam');
    let webcamPredictions = document.getElementById('webcam-predictions');
    let uploadPredictions = document.getElementById('upload-predictions');
    let enableWebcamButton = document.getElementById('webcamButton');

    // Load the ImageClassifier model
    async function createImageClassifier() {
      const vision = await FilesetResolver.forVisionTasks(
        "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm"
      );
      imageClassifier = await ImageClassifier.createFromOptions(vision, {
        baseOptions: {
          modelAssetPath: `https://storage.googleapis.com/mediapipe-models/image_classifier/efficientnet_lite0/float32/1/efficientnet_lite0.tflite`
        },
        maxResults: 1,
        runningMode: runningMode
      });
    }

    // Start the webcam and classify in real-time
    async function predictWebcam() {
      if (imageClassifier === undefined) {
        return;
      }

      // Switch mode to VIDEO for webcam
      if (runningMode !== "VIDEO") {
        runningMode = "VIDEO";
        await imageClassifier.setOptions({ runningMode: "VIDEO" });
      }

      const startTimeMs = performance.now();
      const classificationResult = await imageClassifier.classifyForVideo(video, startTimeMs);
      const classifications = classificationResult.classifications;
      webcamPredictions.innerText = `Classification: ${classifications[0].categories[0].categoryName}\nConfidence: ${Math.round(classifications[0].categories[0].score * 100)}%`;

      if (webcamRunning) {
        window.requestAnimationFrame(predictWebcam);
      }
    }

    // Enable webcam functionality
    async function enableCam() {
      if (!webcamRunning) {
        webcamRunning = true;
        enableWebcamButton.innerText = "DISABLE PREDICTIONS";
        video.srcObject = await navigator.mediaDevices.getUserMedia({ video: true });
        video.addEventListener("loadeddata", predictWebcam);
      } else {
        webcamRunning = false;
        enableWebcamButton.innerText = "ENABLE PREDICTIONS";
        video.srcObject.getTracks().forEach(track => track.stop());
      }
    }

    // Handle image upload and classify
    document.getElementById('image-upload').addEventListener('change', async (event) => {
      const image = document.getElementById('upload-preview');
      image.src = URL.createObjectURL(event.target.files[0]);

      image.onload = async () => {
        // Switch mode to IMAGE for uploaded image
        if (runningMode !== "IMAGE") {
          runningMode = "IMAGE";
          await imageClassifier.setOptions({ runningMode: "IMAGE" });
        }

        const classificationResult = await imageClassifier.classify(image);
        const classifications = classificationResult.classifications;
        uploadPredictions.innerText = `Classification: ${classifications[0].categories[0].categoryName}\nConfidence: ${Math.round(classifications[0].categories[0].score * 100)}%`;
      };
    });

    // Initialize the classifier
    createImageClassifier();

    // Event listener for the webcam button
    enableWebcamButton.addEventListener('click', enableCam);
  </script>

  <footer class="footer-container text-center">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <p>Website created by : Worawiwat Chaichuang , Rawinpat Boontanutsakul , Panupong Jantabootrah</p>
        </div>
      </div>
    </div>

  </footer>

  <script type="text/javascript" src="./main.70a66962.js"></script>
</body>

</html>
